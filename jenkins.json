{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "jenkins specific settings",
  "extends": ["config:recommended", ":semanticCommitsDisabled"],
  "automergeType": "pr",
  "automerge": true,
  "labels": ["dependencies"],
  "packageRules": [
    {
      "description": "No approval for jenkins bom",
      "matchSourceUrlPrefixes": [
        "https://github.com/jenkinsci/bom",
        "https://github.com/jenkinsci/plugin-pom"
      ],
      "dependencyDashboardApproval": false
    },
    {
      "matchDepNames": ["jenkins"],
      "matchDatasources": ["docker"],
      "changelogUrl": "https://jenkins.io/changelog-stable",
      "separateMultipleMajor": true,
      "automerge": false
    },
    {
      "description": "bump revision, doesn't work with single numbers yet",
      "matchFileNames": ["pom.xml"],
      "matchDepNames": ["jenkins"],
      "bumpVersions": [
        {
          "name": "revision",
          "filePatterns": ["pom.xml"],
          "matchStrings": ["<revision>(?<version>\\d\\.\\d\\.\\d)</revision>"],
          "bumpType": "major"
        }
      ]
    }
  ],
  "customManagers": [
    {
      "description": "update jenkins baseline to only `<major>.<minor>.3` versions",
      "customType": "regex",
      "managerFilePatterns": "pom.xml",
      "matchStrings": [
        "<jenkins.baseline>(?<currentValue>.+?)</jenkins.baseline>"
      ],
      "depNameTemplate": "jenkins",
      "packageNameTemplate": "jenkins/jenkins",
      "datasourceTemplate": "docker",
      "extractVersionTemplate": "^(?<version>\\d+\\.\\d+)\\.3$"
    }
  ]
}
