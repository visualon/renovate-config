{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "jenkins specific settings",
  "extends": ["config:best-practices", ":semanticCommitsDisabled"],
  "automergeType": "pr",
  "automerge": true,
  "labels": ["dependencies"],
  "separateMultipleMajor": true,
  "packageRules": [
    {
      "description": "add jenkins changelog url",
      "matchDepNames": ["jenkins"],
      "changelogUrl": "https://jenkins.io/changelog-stable"
    },
    {
      "description": "bump revision for major update",
      "matchFileNames": ["pom.xml"],
      "matchUpdateTypes": ["major"],
      "automerge": false,
      "addLabels": ["breaking"],
      "bumpVersions": [
        {
          "name": "revision",
          "filePatterns": ["pom.xml"],
          "matchStrings": ["<revision>(?<version>.+?)</revision>"],
          "bumpType": "major"
        }
      ]
    }
  ],
  "customManagers": [
    {
      "description": "update jenkins baseline to only `<major>.<minor>.3` versions",
      "customType": "regex",
      "managerFilePatterns": "pom.xml",
      "matchStrings": [
        "<jenkins.baseline>(?<currentValue>.+?)</jenkins.baseline>"
      ],
      "depNameTemplate": "jenkins",
      "packageNameTemplate": "jenkinsci/jenkins",
      "datasourceTemplate": "github-tags",
      "extractVersionTemplate": "^jenkins-(?<version>\\d+\\.\\d+)\\.3$"
    }
  ]
}
