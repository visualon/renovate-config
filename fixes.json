{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "packageRules": [
    {
      "description": "Exclude invalid version from antlr4ts",
      "matchSourceUrlPrefixes": [
        "https://github.com/tunnelvisionlabs/antlr4ts"
      ],
      "allowedVersions": "!/(-dev|-\\w+\\.[a-z0-9]{8})$/"
    },
    {
      "description": "Use node versioning for node",
      "matchPackageNames": ["node", "amd64/node"],
      "versioning": "node"
    },
    {
      "description": "Only stable haproxy / nginx versions",
      "matchPackagePatterns": ["^(?:amd64\\/)?(?:haproxy|nginx)"],
      "allowedVersions": "/^\\d+\\.\\d*[02468]\\.\\d+(-\\w+)?$/"
    },
    {
      "description": "Date based releases",
      "matchPackagePatterns": ["(^|\\/)minio$"],
      "separateMinorPatch": false,
      "separateMajorMinor": false
    },
    {
      "description": "Restrict elasticsearch to v7.10 due to commercial license for v7.11",
      "matchPackageNames": ["elasticsearch"],
      "allowedVersions": "<7.11"
    },
    {
      "description": "Use loose versioning for bitnami images",
      "matchPackagePatterns": [
        "dd^gcr\\.io\\/bitnami-containers\\/",
        "dd^bitnami\\/"
      ],
      "versioning": "loose",
      "allowedVersions": "/^\\d+\\.\\d+\\.\\d+-debian-\\d+-r\\d+$/"
    },
    {
      "description": "Only stable haproxy / nginx bitnami versions",
      "matchPackagePatterns": [
        "^(?:gcr\\.io\\/bitnami-containers|bitnami)\\/(?:haproxy|nginx)"
      ],
      "allowedVersions": "/^\\d+\\.\\d*[02468]\\.\\d+(-\\w+)?$/"
    },
    {
      "description": "Seperate k3s minor / patch updates",
      "matchPackageNames": ["k3s"],
      "separateMinorPatch": true,
    },
    {
      "description": "Require k3s minor update approval",
      "matchPackageNames": ["k3s"],
      "matchUpdateTypes": ["minor"],
      "dependencyDashboardApproval": true
    }
  ]
}
