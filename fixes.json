{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "packageRules": [
    {
      "description": "Exclude invalid version from antlr4ts",
      "matchSourceUrlPrefixes": [
        "https://github.com/tunnelvisionlabs/antlr4ts"
      ],
      "allowedVersions": "!/(-dev|-\\w+\\.[a-z0-9]{8})$/"
    },
    {
      "description": "Use node versioning for node",
      "matchPackageNames": ["node", "amd64/node"],
      "versioning": "node"
    },
    {
      "description": "Only stable haproxy / nginx versions",
      "matchPackagePatterns": ["^(?:amd64\\/)?(?:haproxy|nginx)"],
      "allowedVersions": "/^\\d+\\.\\d*[02468]\\.\\d+(-\\w+)?$/"
    },
    {
      "description": "Date based releases",
      "matchPackagePatterns": ["(^|\\/)minio$"],
      "separateMinorPatch": false,
      "separateMajorMinor": false
    },
    {
      "description": "Only stable haproxy / nginx bitnami versions",
      "matchPackagePatterns": [
        "^(?:gcr\\.io\\/bitnami-containers|bitnami)\\/(?:haproxy|nginx)"
      ],
      "allowedVersions": "/^\\d+\\.\\d*[02468]\\.\\d+(-\\w+)?$/"
    },
    {
      "description": "Seperate k3s minor / patch updates",
      "matchPackageNames": ["k3s"],
      "separateMinorPatch": true
    },
    {
      "description": "Require k3s minor update approval",
      "matchPackageNames": ["k3s"],
      "matchUpdateTypes": ["minor"],
      "dependencyDashboardApproval": true
    },
    {
      "description": "Multiple major updates for docker database images",
      "matchDatasources": ["docker"],
      "matchPackageNames": ["postgres", "mariadb"],
      "matchPackagePatterns": ["(^|\\/)postgresql$", "(^|\\/)mariadb$"],
      "excludePackagePrefixes": ["registry-1.docker.io/bitnamicharts/"],
      "separateMultipleMajor": true
    },
    {
      "description": "Don't group docker database images major updates",
      "matchDatasources": ["docker"],
      "matchPackageNames": ["postgres", "mariadb"],
      "matchPackagePatterns": ["(^|\\/)postgresql$", "(^|\\/)mariadb$"],
      "matchUpdateTypes": ["major"],
      "excludePackagePrefixes": ["registry-1.docker.io/bitnamicharts/"],
      "groupName": null
    },
    {
      "description": "Force different branch for dotnet runtime dependend major updates",
      "matchPackagePrefixes": ["Microsoft.AspNetCore"],
      "matchDatasources": ["nuget"],
      "matchUpdateTypes": ["major"],
      "groupName": "dotnet-aspnet"
    },
    {
      "description": "Fix forgejo docker image versioning",
      "matchPackageNames": [
        "codeberg.org/forgejo/forgejo",
        "ghcr.io/visualon/forgejo"
      ],
      "matchDatasources": ["docker"],
      "versioning": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)-(?<build>\\d+)(?:-(?<compatibility>.+))?$"
    },
    {
      "description": "Fix shim versioning",
      "matchPackageNames": ["shim", "kiennq/scoop-better-shimexe"],
      "versioning": "regex:^v?(?<major>\\d+)\\.(?<minor>\\d+)(?:\\.(?<patch>\\d+))?$"
    },
    {
      "description": "Fix zalando spilo docker image versioning",
      "matchPackagePrefixes": ["ghcr.io/zalando/spilo-"],
      "matchDatasources": ["docker"],
      "versioning": "regex:^(?<major>\\d+)\\.(?<minor>\\d+)-p(?<patch>\\d+)$"
    },
    {
      "description": "Fix primeng when latest tag is not latest version",
      "matchDatasources": ["npm"],
      "matchDepNames": ["primeng"],
      "respectLatest": false
    },
    {
      "description": "Fix oci helm chart commit message",
      "matchDatasources": ["docker"],
      "matchManagers": ["helmv3"],
      "commitMessageTopic": "helm chart {{depName}}"
    },
    {
      "matchSourceUrlPrefixes": ["https://github.com/bitnami/charts"],
      "commitMessageTopic": "helm chart {{depName}}"
    },
    {
      "description": "Use semver-coerce for action updates",
      "matchDepTypes": ["action"],
      "versioning": "semver-coerce"
    }
  ]
}
